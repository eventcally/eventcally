{% extends "layout.html" %}
{% from "_macros.html" import render_roles, render_pagination, render_event_organizer, render_manage_menu %}
{% block title %}
{{ _('Members') }}
{% endblock %}
{% block content %}

<h1>{{ admin_unit.name }}</h1>

{{ render_manage_menu(admin_unit, 'members') }}

<h2>{{ _('Invitations') }}</h2>
<div class="my-4">
    {% if can_invite_users %}
    <a class="btn btn-outline-secondary my-1" href="{{ url_for('manage_admin_unit_member_invite', id=admin_unit.id) }}" role="button"><i class="fa fa-plus"></i> {{ _('Invite user') }}</a>
    {% endif %}
</div>
<ul class="list-group">
{% for invitation in invitations %}
    <li class="list-group-item">
        <div class="dropdown d-inline-block">
            <button class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ invitation.email }}</button>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="{{ url_for('manage_admin_unit_invitation_delete', id=invitation.id) }}">{{ _('Delete') }}...</a>
            </div>
        </div>
    </li>
{% endfor %}
</ul>

<h2>{{ _('Members') }}</h2>
<ul class="list-group">
{% for member in members %}
    <li class="list-group-item">
        <div class="dropdown d-inline-block">
            <button class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ member.user.email }}</button>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="{{ url_for('manage_admin_unit_member_update', id=member.id) }}">{{ _('Edit') }}</a>
                <a class="dropdown-item" href="{{ url_for('manage_admin_unit_member_delete', id=member.id) }}">{{ _('Delete') }}...</a>
            </div>
        </div>
        <small>{{ render_roles(member.roles)}}</small>
    </li>
{% endfor %}
</ul>

<div class="my-4">{{ render_pagination(pagination) }}</div>

{% endblock %}